<div class="app-container" [attr.data-theme]="themeService.isDarkMode() ? 'dark' : 'light'">
  <!-- Header -->
  <header class="app-header">
    <div class="header-content">
      <h1>ğŸ§  {{ langService.t('app.title') }}</h1>
      <p>{{ langService.t('app.subtitle') }}</p>
    </div>
    <div class="header-controls">
      <button class="lang-toggle" (click)="langService.toggleLanguage()" title="Change language">
        {{ langService.currentLang() === 'it' ? 'ğŸ‡¬ğŸ‡§ EN' : 'ğŸ‡®ğŸ‡¹ IT' }}
      </button>
      <button class="theme-toggle" (click)="themeService.toggleTheme()" title="Toggle dark mode">
        {{ themeService.isDarkMode() ? 'â˜€ï¸' : 'ğŸŒ™' }}
      </button>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="main-nav">
    <button
      (click)="setView('chat')"
      [class.active]="activeView() === 'chat'"
      class="nav-btn"
    >
      {{ langService.t('menu.chat') }}
    </button>
    <button
      (click)="setView('calendar')"
      [class.active]="activeView() === 'calendar'"
      class="nav-btn"
    >
      {{ langService.t('menu.calendar') }}
    </button>
    <button
      (click)="setView('diary')"
      [class.active]="activeView() === 'diary'"
      class="nav-btn"
    >
      {{ langService.t('menu.diary') }}
    </button>
    <button
      (click)="setView('community')"
      [class.active]="activeView() === 'community'"
      class="nav-btn"
    >
      {{ langService.t('menu.community') }}
    </button>
    <button
      (click)="setView('obiettivi')"
      [class.active]="activeView() === 'obiettivi'"
      class="nav-btn"
    >
      {{ langService.t('menu.obiettivi') }}
    </button>
    <button
      (click)="setView('habits')"
      [class.active]="activeView() === 'habits'"
      class="nav-btn"
    >
      {{ langService.t('menu.habits') }}
    </button>
    <button
      (click)="setView('pomodoro')"
      [class.active]="activeView() === 'pomodoro'"
      class="nav-btn"
    >
      {{ langService.t('menu.pomodoro') }}
    </button>
    <button
      (click)="setView('stats')"
      [class.active]="activeView() === 'stats'"
      class="nav-btn"
    >
      {{ langService.t('menu.stats') }}
    </button>
    <button
      (click)="setView('mood')"
      [class.active]="activeView() === 'mood'"
      class="nav-btn"
    >
      ğŸ˜Š Mood
    </button>
    <button
      (click)="setView('insights')"
      [class.active]="activeView() === 'insights'"
      class="nav-btn"
    >
      ğŸ’¡ Insights
    </button>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-wrapper">
      <!-- Chat View -->
      <div *ngIf="activeView() === 'chat'" class="view-container">
        <app-chat-interface></app-chat-interface>
      </div>

      <!-- Calendar View -->
      <div *ngIf="activeView() === 'calendar'" class="view-container">
        <app-calendar-view></app-calendar-view>
      </div>

      <!-- Diary View -->
      <div *ngIf="activeView() === 'diary'" class="view-container">
        <app-diary-book></app-diary-book>
      </div>

      <!-- Community View -->
      <div *ngIf="activeView() === 'community'" class="view-container">
        <app-community-feed></app-community-feed>
      </div>

      <!-- Obiettivi View -->
      <div *ngIf="activeView() === 'obiettivi'" class="view-container">
        <app-obiettivi-manager></app-obiettivi-manager>
      </div>

      <!-- Habits View -->
      <div *ngIf="activeView() === 'habits'" class="view-container">
        <app-habits-tracker></app-habits-tracker>
      </div>

      <!-- Pomodoro View -->
      <div *ngIf="activeView() === 'pomodoro'" class="view-container">
        <app-pomodoro-timer></app-pomodoro-timer>
      </div>

      <!-- Stats View -->
      <div *ngIf="activeView() === 'stats'" class="view-container">
        <app-stats-dashboard></app-stats-dashboard>
      </div>

      <!-- Mood Analytics View -->
      <div *ngIf="activeView() === 'mood'" class="view-container">
        <app-mood-analytics></app-mood-analytics>
      </div>

      <!-- Smart Insights View -->
      <div *ngIf="activeView() === 'insights'" class="view-container">
        <app-smart-insights></app-smart-insights>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <p>Powered by Angular 19 & TypeScript | Versione modernizzata con architettura separata frontend/backend</p>
  </footer>

  <!-- Toast Notifications -->
  <app-toast></app-toast>
  
  <!-- Global Search -->
  <app-global-search></app-global-search>
</div>
